---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import SkillBar from '../components/SkillBar.astro';
import ProjectCard from '../components/ProjectCard.astro';
import Footer from '../components/Footer.astro';
import Lightbox from '../components/Lightbox.astro';

import { profile, services, skills, projects } from '../data/content';
---

<BaseLayout title="David Breuer | Front-End Web Developer | Game Maker">
  <!-- Header with Logo -->
  <header class="text-center py-6 bg-white">
    <div class="inline-flex items-center gap-0 text-3xl font-bold tracking-tight">
      <span class="bg-emerald-300 text-zinc-900 px-3 py-1">DAVID</span>
      <span class="bg-sky-300 text-white px-3 py-1">BREUER</span>
    </div>
    <p class="text-zinc-500 text-sm mt-2">Hacker | Creator | Food fan</p>
  </header>

  <!-- Navigation -->
  <Header filters={['services', 'portfolio', 'about']} />

  <!-- Main Masonry Grid -->
  <main class="max-w-5xl mx-auto px-4 py-6 ">
    <div class="grid grid-cols-4 gap-3 auto-rows-[140px]">
      
      <!-- Hi There - Large Card (2x3) -->
      <div class="col-span-2 row-span-4 bg-zinc-800 p-6 flex flex-col justify-center" data-category="about,all">
        <h2 class="text-stone-300 text-2xl font-bold mb-3">Hi, there</h2>
        <p class="text-4xl leading-normal text-white leading-relaxed">
          I am <span class="text-sky-300">David Breuer</span>, a hungarian-born Front-End 
          <span class="text-sky-300">Web Developer</span> and based in London. I have a deep 
          passion to create a good UX websites, applications and games.
        </p>
      </div>

      <!-- Profile Image -->
      <div class="col-span-1 row-span-2 bg-zinc-700 overflow-hidden" data-category="about,all">
        <img src="/images/david_breuer_portfolio_movember.jpg" alt="David Breuer" class="w-full h-full object-cover" />
      </div>

      <!-- Color Block -->
      <div class="col-span-1 row-span-2 bg-emerald-300" data-category="about,all"></div>

      <!-- Our Services Card -->
      <div class="col-span-2 row-span-4 bg-zinc-800 p-6 flex flex-col justify-center" data-category="services,all">
        <h2 class="text-stone-300 text-2xl font-bold mb-3">Our Services</h2>
        <p class="text-4xl text-white leading-relaxed">
          I am absolutely passionate about <span class="text-sky-400">simple yet sophisticated</span> user 
          experience and designs that myself, and my clients, are very proud of.
        </p>
      </div>

      <!-- Second Image -->
      <div class="col-span-1 row-span-2 bg-zinc-700 overflow-hidden" data-category="about,all">
<img src="/images/david_breuer_iot_prototyping.jpg" alt="David Breuer" class="w-full h-full object-cover" />
      </div>

      <!-- Efficiency Card -->
      <div class="col-span-1 row-span-2 bg-zinc-800 p-4" data-category="services,all">
        <h3 class="text-white font-semibold mb-2">Efficiency</h3>
        <p class="text-zinc-400 text-xl leading-normal">
          I use a well-proven process to deliver a tailor made UX to our Clients. Every project 
          has clear goals, precise timing, and flawless management.
        </p>
      </div>

      <!-- Design Card (Blue) -->
      <div class="col-span-1 row-span-2 bg-emerald-300 p-4" data-category="services,all">
        <h3 class="text-neutral-700 font-semibold mb-2">Design</h3>
        <p class="text-neutral-700 text-xl leading-normal">
          Design for coders and don't waste precious time in design first, check later. I 
          work side by side with designers.
        </p>
      </div>

      <!-- Innovation Card -->
      <div class="col-span-1 row-span-2 bg-zinc-800 p-4" data-category="services,all">
        <h3 class="text-white font-semibold mb-2">Innovation</h3>
        <p class="text-zinc-400 text-xl leading-normal">
          I do not simply make websites. I create digital experiences to make the web come alive.
        </p>
      </div>

      <!-- Skills Card -->
      <div class="col-span-1 row-span-2 bg-zinc-800 p-3" data-category="about,all">
        {skills.map((skill) => (
          <SkillBar name={skill.name} value={skill.value} />
        ))}
      </div>

      <!-- Portfolio Projects -->
      {projects.map((project) => (
        <div class="col-span-1 row-span-2" data-category="portfolio,all">
          <ProjectCard 
            id={project.id}
            title={project.title} 
            image={project.image}
            images={project.images}
            link={project.link}
          />
        </div>
      ))}

    </div>
  </main>

  <Footer />
  <Lightbox />
</BaseLayout>

<style is:global>
  html {
    scroll-behavior: smooth;
  }
  
  body {
    background-color: #18181b;
  }
  
  ::selection {
    background-color: rgba(45, 212, 191, 0.3);
  }

  #facebook .Header {
    display: none !important;
  }

  /* Isotope-style transitions */
  .grid > div {
    transition: opacity 0.5s ease, transform 0.5s ease;
    opacity: 1;
    transform: scale(1);
  }

  .grid > div.isotope-hidden {
    opacity: 0;
    transform: scale(0.001);
    pointer-events: none;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const facebookHeader = document.querySelector("#facebook .Header") as HTMLElement;
    if (facebookHeader) {
      facebookHeader.style.display = 'none';
    }

    // Filter functionality with isotope-style animation
    const filterButtons = document.querySelectorAll('[data-filter]');
    const gridItems = document.querySelectorAll('.grid > div[data-category]');

    filterButtons.forEach(button => {
      button.addEventListener('click', () => {
        const filter = button.getAttribute('data-filter');
        
        // Update active state
        filterButtons.forEach(btn => btn.classList.remove('bg-teal-400', 'text-zinc-900'));
        filterButtons.forEach(btn => btn.classList.add('text-zinc-400'));
        button.classList.remove('text-zinc-400');
        button.classList.add('bg-teal-400', 'text-zinc-900');

        // Filter items with animation
        gridItems.forEach(item => {
          const categories = item.getAttribute('data-category')?.split(',') || [];
          
          if (filter === 'all' || categories.includes(filter || '')) {
            item.classList.remove('isotope-hidden');
          } else {
            item.classList.add('isotope-hidden');
          }
        });
      });
    });
  });
</script>
